(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1583:function(e,a,t){"use strict";var n=t(1),s=t.n(n),l=t(230),i=t(1745),r=t(1670),c=t(1637),o=t(1656),p=t(1267);a.a=Object(p.a)(e=>({menuItem:{color:e.palette.getContrastText(e.palette.background.paper)}}))(e=>{const{subscriptions:a,handleChanges:t,selectedApplication:n,selectedKeyType:p,classes:u,selectedTokenType:m}=e;return s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{display:"flex",justifyContent:"center"},s.a.createElement(i.a,{xs:12,md:3},s.a.createElement(c.a,null,s.a.createElement(o.a,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:s.a.createElement(l.a,{defaultMessage:"Appplications",id:"Apis.Details.ApiConsole.SelectAppPanel.applications"}),value:n,name:"selectedApplication",onChange:t,SelectProps:a,helperText:s.a.createElement(l.a,{defaultMessage:"Please select an application",id:"Apis.Details.ApiConsole.SelectAppPanel.select.an.application"}),margin:"normal",variant:"outlined"},a.map(e=>s.a.createElement(r.a,{value:e.applicationInfo.applicationId,key:e.applicationInfo.applicationId,className:u.menuItem},e.applicationInfo.name))))),s.a.createElement(i.a,{xs:12,md:3},"JWT"!==m&&s.a.createElement(c.a,{ml:2},s.a.createElement(o.a,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:s.a.createElement(l.a,{defaultMessage:"Key Type",id:"Apis.Details.ApiConsole.SelectAppPanel.key.type"}),value:p,name:"selectedKeyType",onChange:t,helperText:s.a.createElement(l.a,{defaultMessage:"Please select a key type",id:"Apis.Details.ApiConsole.SelectAppPanel.select.key.type"}),margin:"normal",variant:"outlined"},null!=a&&"UNBLOCKED"===a.find(e=>e.applicationId===n).status&&s.a.createElement(r.a,{value:"PRODUCTION",className:u.menuItem},s.a.createElement(l.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.production",defaultMessage:"PRODUCTION"})),s.a.createElement(r.a,{value:"SANDBOX",className:u.menuItem},s.a.createElement(l.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.sandbox",defaultMessage:"SANDBOX"})))))))})},2447:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),l=t(1666),i=t(28),r=t.n(i),c=t(1645),o=t(230),p=t(1523),u=t(37),m=t(1745),d=t(1637),g=t(1707),E=t(1656),h=t(1670),y=t(1644),f=t(1678),b=t(1658),A=t(1768),S=t(1721),O=t(1849),C=t(1649),T=t(1583),v=t(1306),k=t(1285),P=t(304);const I=Object(p.a)(e=>({buttonIcon:{marginRight:10},centerItems:{margin:"auto"},tokenType:{margin:"auto",display:"flex"},inputAdornmentStart:{minWidth:e.spacing(18)},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},usernameField:{width:"100%"},passwordField:{width:"100%",marginLeft:e.spacing(1)}}));function N(e){const a=I(),{accessToken:t,setAccessTocken:i,authorizationHeader:r,securitySchemeType:p,setSecuritySchemeType:N,prefix:j,isApiKeyEnabled:R,isBasicAuthEnabled:w,isOAuthEnabled:x,setURLs:L,environmentObject:D,setFound:B,username:U,setUserName:M,password:q,setPassword:G}=e,{api:K}=Object(n.useContext)(k.a),Q=u.a.getUser(),[F,H]=Object(n.useState)(!1),[z,W]=Object(n.useState)(null),[_,X]=Object(n.useState)(""),[Y,J]=Object(n.useState)("PRODUCTION"),$=K.endpointURLs.map(e=>e.environmentName),[V,Z]=Object(n.useState)($[0]),[ee,ae]=Object(n.useState)(),te=K.lifeCycleStatus&&"prototyped"===K.lifeCycleStatus.toLowerCase();Object(n.useEffect)(()=>{const e=K.id,a=new P.a;if(null!=Q){a.getSubscriptions(e).then(e=>{const a=e.obj.list.filter(e=>"UNBLOCKED"===e.status||"PROD_ONLY_BLOCKED"===e.status);if(a&&a.length>0){const e=a[0].applicationId;X(e),v.a.get(e).then(e=>e.getKeys()).then(e=>{e.get("SANDBOX")?J("SANDBOX"):e.get("PRODUCTION")&&J("PRODUCTION"),ae(e)})}W(a)}).catch(e=>{const{status:a}=e;404===a&&B(!0)})}},[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{className:a.paper},s.a.createElement(m.a,{container:!0,className:a.grid},!te&&!Q&&s.a.createElement(m.a,{item:!0,md:6},s.a.createElement(l.a,{className:a.userNotificationPaper},s.a.createElement(c.a,{variant:"h5",component:"h3"},s.a.createElement(g.a,null,"warning")," ",s.a.createElement(o.a,{id:"notice",defaultMessage:"Notice"})),s.a.createElement(c.a,{component:"p"},s.a.createElement(o.a,{id:"Apis.Details.GraphQLConsole.GraphQLAuthentication.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."})))),!te&&s.a.createElement(m.a,{xs:12,md:12,item:!0},s.a.createElement(d.a,{display:"block"},Q&&z&&z.length>0&&s.a.createElement(T.a,{subscriptions:z,handleChanges:e=>{const{value:a,name:t}=e.target;if("selectedApplication"===t){const e=v.a.get(a);let t;X(a),null!=z&&"PROD_ONLY_BLOCKED"===z.find(e=>e.applicationId===_).status?(J("SANDBOX"),t="SANDBOX"):t=Y,e.then(e=>e.getKeys()).then(e=>{if(e.get(t)){const{accessToken:a}=e.get(t).token;i(a)}else i("");ae(e)})}else if(J(a),ee.get(a)){const{accessToken:e}=ee.get(a).token;i(e)}else i("")},selectedApplication:_,selectedKeyType:Y}),Q&&null===z&&s.a.createElement(d.a,{display:"flex",justifyContent:"center"},s.a.createElement(C.a,{size:35})),z&&0===z.length&&s.a.createElement(d.a,{display:"flex",justifyContent:"center"},s.a.createElement(c.a,{variant:"body1",gutterBottom:!0},s.a.createElement(o.a,{id:"Apis.Details.GraphQLConsole.GraphQLAuthentication.please.subscribe.to.application",defaultMessage:"Please subscribe to an application"}))),s.a.createElement(d.a,{display:"flex",justifyContent:"center"},s.a.createElement(m.a,{xs:12,md:6,item:!0},$&&$.length>0&&s.a.createElement(E.a,{fullWidth:!0,select:!0,label:s.a.createElement(o.a,{defaultMessage:"Environment",id:"Apis.Details.GraphQLConsole.GraphQLAuthentication.env"}),value:V,name:"selectedEnvironment",onChange:e=>{const{value:a}=e.target;Z(a);const t=D.find(e=>a===e.environmentName).URLs;L(t)},helperText:s.a.createElement(o.a,{defaultMessage:"Please select an environment",id:"Apis.Details.GraphQLConsole.SelectAppPanel.select.env"}),margin:"normal",variant:"outlined"},$&&$.length>0&&s.a.createElement(h.a,{value:"",disabled:!0},s.a.createElement("em",null,s.a.createElement(o.a,{id:"api.gateways",defaultMessage:"API Gateways"}))),$&&$.map(e=>s.a.createElement(h.a,{value:e,key:e},e))))),s.a.createElement(d.a,{display:"block",justifyContent:"center"},s.a.createElement(m.a,{x:12,md:6,className:a.tokenType,item:!0},"BASIC"===p?s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{margin:"normal",variant:"outlined",className:a.usernameField,label:s.a.createElement(o.a,{id:"username",defaultMessage:"Username"}),name:"username",onChange:e=>{const{value:a}=e.target;M(a)},value:U||""}),s.a.createElement(E.a,{margin:"normal",variant:"outlined",className:a.passwordField,label:s.a.createElement(o.a,{id:"password",defaultMessage:"Password"}),name:"password",onChange:e=>{const{value:a}=e.target;G(a)},value:q||""})):s.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:s.a.createElement(o.a,{id:"access.token",defaultMessage:"Access Token"}),name:"accessToken",onChange:e=>{const{value:a}=e.target;i(a)},type:F?"text":"password",value:t||"",helperText:s.a.createElement(o.a,{id:"enter.access.token",defaultMessage:"Enter access Token"}),InputProps:{endAdornment:s.a.createElement(y.a,{position:"end"},s.a.createElement(f.a,{edge:"end","aria-label":"Toggle token visibility",onClick:()=>{H(!F)}},F?s.a.createElement(g.a,null,"visibility_off"):s.a.createElement(g.a,null,"visibility"))),startAdornment:s.a.createElement(y.a,{className:a.inputAdornmentStart,position:"start"},`${r}: ${j}`)}})),s.a.createElement(m.a,{x:12,md:6,className:a.centerItems},(R||w||x)&&s.a.createElement(b.a,{component:"fieldset"},s.a.createElement(A.a,{name:"securityScheme",value:p,onChange:e=>{const{value:a}=e.target;N(a)},row:!0},x&&s.a.createElement(S.a,{value:"OAUTH",control:s.a.createElement(O.a,null),label:"Referenced (OAuth)"}),w&&s.a.createElement(S.a,{value:"BASIC",control:s.a.createElement(O.a,null),label:"Basic"}),R&&s.a.createElement(S.a,{value:"API-KEY",control:s.a.createElement(O.a,null),label:"API Key"}))))))))))}N.propTypes={classes:r.a.shape({paper:r.a.string.isRequired,titleSub:r.a.string.isRequired,grid:r.a.string.isRequired,userNotificationPaper:r.a.string.isRequired,root:r.a.string.isRequired,inputAdornmentStart:r.a.string.isRequired,centerItems:r.a.string.isRequired}).isRequired};var j=t(2249),R=t.n(j),w=t(2346),x=t.n(w),L=(t(2347),t(2349)),D=t.n(L),B=t(170);const{buildSchema:U}=t(1277);function M(e){const{accessToken:a,authorizationHeader:t,URLs:l,securitySchemeType:i,username:r,password:c}=e,{api:p}=Object(n.useContext)(k.a),[u,m]=Object(n.useState)(null),[g,h]=Object(n.useState)(""),[y,f]=Object(n.useState)(!1),b=Object(n.useRef)(null);Object(n.useEffect)(()=>{const e=p.id;(new P.a).getGraphQLSchemaByAPIId(e).then(e=>{const a=U(e.data);m(a)})},[]);const A={},S=()=>{const e=!y;A.isExplorerOpen=e,f(e)};return null==={schema:u}?s.a.createElement(B.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{width:"30%",m:1},s.a.createElement(E.a,{label:s.a.createElement(o.a,{defaultMessage:"Gateway URLs",id:"Apis.Details.GraphQLConsole.GraphQLUI.URLs"}),value:l.https,name:"selectedURL",fullWidth:!0,margin:"normal",variant:"outlined",InputProps:l.https})),s.a.createElement("div",{styles:{width:"100%"}},s.a.createElement(d.a,{display:"flex"},s.a.createElement(d.a,{display:"flex"},s.a.createElement(D.a,{schema:u,query:g,onEdit:h,explorerIsOpen:y,onToggleExplorer:S})),s.a.createElement(d.a,{display:"flex",height:"800px",flexGrow:1},s.a.createElement(R.a,{ref:b,fetcher:function(e){let n;if("apikey"===t)n=a;else if("BASIC"===i){n="Basic "+btoa(r+":"+c)}else n="Bearer "+a;return x()(l.https,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",[t]:n},body:JSON.stringify(e)}).then(e=>e.json())},schema:u,query:g,onEditQuery:h},s.a.createElement(R.a.Toolbar,null,s.a.createElement(R.a.Button,{onClick:()=>b.current.handlePrettifyQuery(),label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),s.a.createElement(R.a.Button,{onClick:()=>b.current.handleToggleHistory(),label:"History",title:"Show History"}),s.a.createElement(R.a.Button,{onClick:()=>f(!y),label:"Explorer",title:"Toggle Explorer"})))))))}M.propTypes={classes:r.a.shape({paper:r.a.string.isRequired}).isRequired},t.d(a,"default",(function(){return G}));const q=Object(p.a)(e=>({paper:{margin:e.spacing(1),padding:e.spacing(1)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}}));function G(){const e=q(),{api:a}=Object(n.useContext)(k.a),t=a.endpointURLs,[i,r]=Object(n.useState)(t[0].URLs),[p,u]=Object(n.useState)(""),[m,d]=Object(n.useState)("OAUTH"),[g,E]=Object(n.useState)(!1),[h,y]=Object(n.useState)(""),[f,b]=Object(n.useState)("");if(null==a)return s.a.createElement(B.a,null);if(g)return"API Not found !";let A=!1,S=!1,O=!1,C=a.authorizationHeader?a.authorizationHeader:"Authorization",T="Bearer";return a&&a.securityScheme&&(A=a.securityScheme.includes("api_key"),S=a.securityScheme.includes("basic_auth"),O=a.securityScheme.includes("oauth2"),A&&"API-KEY"===m&&(C="apikey",T="")),s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{variant:"h4",className:e.titleSub},s.a.createElement(o.a,{id:"Apis.Details.GraphQLConsole.GraphQLConsole.title",defaultMessage:"Try Out"})),s.a.createElement(N,{api:a,securitySchemeType:m,setSecuritySchemeType:d,username:h,setUserName:y,password:f,setPassword:b,prefix:T,isApiKeyEnabled:A,isOAuthEnabled:O,isBasicAuthEnabled:S,accessToken:p,setAccessTocken:u,authorizationHeader:C,setURLs:r,environmentObject:t,setFound:E}),s.a.createElement(l.a,{className:e.paper},s.a.createElement(M,{accessToken:p,authorizationHeader:C,URLs:i,username:h,password:f,securitySchemeType:m})))}G.propTypes={classes:r.a.shape({paper:r.a.string.isRequired,titleSub:r.a.string.isRequired,root:r.a.string.isRequired}).isRequired}}}]);
//# sourceMappingURL=GraphQLConsole.7c51e4a48d9f61c5e213.bundle.js.map